(()=>{var e={639:()=>{const e=document.getElementById("tabParent"),t=document.querySelectorAll(".header__link"),n=document.getElementsByClassName("tabsContent"),a=()=>{for(let e of n)e.classList.remove("visible","fade"),e.classList.add("hidden");t.forEach((e=>{e.classList.remove("header__link_active","fade")}))},i=(e=1)=>{n[e].classList.remove("hidden"),n[e].classList.add("visible","fade"),t[e].classList.add("header__link_active","fade")};a(),i(),e.addEventListener("click",(e=>{const n=e.target;n&&n.classList.contains("header__link")&&t.forEach(((e,t)=>{n===e&&(a(),i(t))}))}));const s=document.getElementById("serverButton"),o=document.getElementById("inp"),c=document.getElementById("filmContainer"),l=(e,t)=>{const n=document.createElement(e);return n.setAttribute("class",t),n},d=e=>{e.innerHTML=""},r=(e,t)=>{var n;d(t),e.length?(n=t,e.forEach((e=>{(({img:e,id:t},n)=>{const a=l("div","films__img-block fade");a.setAttribute("data-id",t);const i=l("img","films__img"),s=l("i","icon icon-circle-right");i.setAttribute("src",e),n.append(a),a.append(i),a.append(s)})({img:e.show?.image?.medium||e?.image?.medium,id:e?.show?.id||e?.id},n)}))):t.append("NOT FOUND")},m=async()=>{let e;e=o.value?`http://api.tvmaze.com/search/shows?q=${o.value}`:"http://api.tvmaze.com/shows?page=1";const t=await fetch(e);try{return(await t.json()).slice(0,40)}catch{(({status:e})=>{console.log("Ошибка соединения ",e)})(t.status)}},g=()=>{m().then((e=>{r(e,c)}))};g(),s.addEventListener("click",(()=>{g()}));const u=document.getElementById("genre"),h=e=>{e.addEventListener("change",(()=>{m().then((t=>t.filter((t=>t?.show?.language===e.value)))).then((e=>{r(e,c)}))}))};h(document.getElementById("language")),h(u);const v=document.getElementById("favouriteContainer");let p=[];c.addEventListener("click",(e=>{e.target&&e.target.classList.contains("icon-circle-right")&&(console.log(e.target.parentElement.getAttribute("data-id")),E(e.target),f())}));const E=e=>{m().then((t=>{t.forEach((t=>{(+t?.show?.id||+t?.id)===+e.parentElement.getAttribute("data-id")&&(p=[...p,t],p.forEach(((e,t)=>{localStorage.setItem(`Item ${e.show?.id||e?.id}`,JSON.stringify(e))})))}))}))},f=()=>{let e=[];for(let t=0,n=localStorage.length;t<n;t++){let n=localStorage.getItem(localStorage.key(t));e=[...e,JSON.parse(n)]}r(e,v)};f();const L=document.getElementById("modal"),_=document.getElementById("modalClose");c.addEventListener("click",(e=>{e.target&&e.target.classList.contains("films__img")&&(L.classList.remove("hidden"),L.classList.add("visible"))})),_.addEventListener("click",(()=>{L.classList.remove("visible"),L.classList.add("hidden")}));const y=document.getElementById("pagination"),b=document.getElementById("itemsPerPage"),I=e=>{const t=l("li","pagination__item");t.innerText=e,y.append(t)},B=e=>{let t=+b.value||8,n=((+e.innerText||1)-1)*t,a=n+t;m().then((e=>e.slice(n,a))).then((e=>{r(e,c)}))};b.addEventListener("change",(()=>{d(y),m().then((e=>{const t=Math.ceil(+e.length/+b.value);console.log(t);for(let e=1;e<=t;e++)I(e),B(b.value)}))})),y.addEventListener("click",(e=>{const t=e.target;t&&t.classList.contains("pagination__item")&&B(t)}))}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(639)})()})();